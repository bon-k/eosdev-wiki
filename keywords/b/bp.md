---
description: Block Producer
---

# BP

## 개요

블록을 생성하는 특별한 노드이다. Block Producer의 약자. 줄여서 BP 라고 한다.

일반 노드는 블록을 생성할 수 있는 권한이 없다. 오직 BP가 되어야지만 블럭을 생성할 수 있다. 투표를 통하여  21순위 안에 들면 BP가 될 수 있다. BP 후보를 등록하고 투표를 하는 행위는 모두 [system contract](../s/system-contract.md) 에 정의가 되어 있으므로 자동 처리된다.

내가 생각하기에 이오스를 막론하고 모든 블록체인에서 가장 중요한 문제는 누가 블록을 생성할 것인가? 라고 생각한다. 블록체인은 탈 중앙화 시스템 방식이다. 우리가 일반적으로 알고 있는 중앙집권식 시스템은 마스터 권한을 가진 사람이 모든 것을 만들고 모든 것을 통제하면 되기 때문에 딱히 룰 같은 게 필요가 없다. 잘못되면 본인이 모든 것을 책임지면 되기 때문이다. 그러나 탈 중앙화 방식의 개념인 블록체인에서는 마스터 권한처럼 최고 관리자라는 개념이 없기 때문에 특정 룰이 필요하다. 왜냐하면 불특정 다수가 언제든지 노드가 될 수 있기 때문에 신뢰할 수 없는 노드가 들어와서 네트워크를 망가 트릴 수 있기 때문이다. 최고 관리자라는 개념도 없어서 책임질 사람도 없다. 블록체인이라는 것도 어차피 코드로 이루어진 프로그램일 뿐이기에, 개발자가 나쁜 맘을 먹고 내부 코드를 수정한다면 정상적인 네트워크를 이룰 수 없기 때문이다. 한마디로 블록을 생성하는 노드는 신뢰할 수 있는 사람이 생성을 해야 한다는 것이다. 

결국 합의 알고리즘이라는 것은 어떠한 방법으로 블록 생성자를 신뢰할 것이며 누가 블록을 생성할지에 대한 서로 간의 합의인 셈이다. \( 추가적으로 네트워크를 지속하기 위해 블록 생성에 기여한 기여자에게 얼마만큼의 토큰을 분배할 것인가에 대한 합의 내용도 포함되어 있다. \) 그러므로 탈 중앙화 방식의 시스템에서는 합의 알고리즘이 필수인 것이다. 참고로 블록을 생성하는 사람이 소수일 경우 그 사람들끼리 합의하여 코드를 수정한 뒤 잘못된 블록을 생성할 수 있기 때문에 서로를 견제하기 위해서 신뢰할 수 있는 노드가 많으면 많을수록 보안성은 올라간다고 볼 수 있다. 하지만 감시자가 많아 보안이 우수해지는 대신 합의하는 시간이 길어져서 속도는 저하된다. 탈 중앙화 방식의 블록체인에서는 보안도 우수하고 속도도 우수한 블록체인이라는 것은 존재하지 않는다. 둘 중 하나를 희생하여서 만들어지는 것이 바로 탈 중앙화 블록체인 방식이다. 이오스는 이러한 균형점을 찾기 위하여 21명의 BP라는 숫자를 선택했다. 이를 투표로 선발할 수 있게 하였다. 21개라는 숫자는 적당히 속도도 빠르고 적당히 서로 간에 견제를 할 수 있는 숫자라고 판단해서 선택한 것 같다.

참고로 비공개형 프라이빗 블록체인 같은 경우는 속도와 보안성 둘 다 잡을 순 있을 것이다. 그러나, 비공개형으로 만들어지는 블록체인 플랫폼은 탈 중앙화의 의미가 거의 없다시피 하기 때문에 이것을 블록체인으로 보아야 하는가에 대한 의문은 여전히 남아있는 상태이다. 이러한 점을 비춰볼 때, 무식한 방법이지만 보안성 면에서는 비트코인이 가장 우수하다고 할 수 있다. 다만 속도가 너무 떨어져서 실사용하기가 힘들 뿐이다.

## BP가 얻는 보상





## BP가 되는 방법

해당 순서를 진행하기에 앞서 [eosio.system](../e/eosio.system.md) 컨트랙트를 배포한 상태이어야 한다. BP가 되는 방법에는 총 3가지의 순서를 따른다.

1. [BP 후보를 등록한다.](bp.md#1-bp)
2. [투표권을 가진 자가 투표한다.](bp.md#2)
3. [총 투표수가 일정수에 도달하면 BP가 자동 갱신된다.](bp.md#3-bp)

### 1. BP 후보를 등록한다.

BP 후보는 누구나 지원할 수 있다. 명령은 [`cleos`](../c/cleos.md) 를 이용하면 된다. 

```text
cleos system regproducer bpaccount EOS6MRyAjQq8ud7hVNYcfnVPJqcVpscN5So8BhtHuGYqET5GDW5CV https://example.com
```

`cleos system regproducer` : BP 후보 등록을 위한 CLI 명령어

`bpaccount` : BP 후보를 등록할 계정

`EOS6MRyAjQq8ud7hVNYcfnVPJqcVpscN5So8BhtHuGYqET5GDW5CV` : BP로 선출될 경우 블록 생성때  사용할 서명키를 입력한다. public key를 입력한다. 보안적인 측면에서는 자신이 사용하고 있는 [Owner key](../o/owner-key.md) 혹은 [Active key](../a/active-key.md) 와 다른 다른 키를 입력하는것이 좋다.

`https://example.com` : BP가 운영중인 사이트 URL를 입력한다. 변경할 수 있으므로 크게 신경 쓰지 않아도 된다.

### 2. 투표권을 가진 자가 투표한다.

투표권이 있는 유저가 BP 후보에게 투표할 수 있다. 투표권이란 [CPU](../c/cpu.md), [NET](../n/net.md) 자원의 Stake 총 수량 만큼 투표권을 획득할 수 있다. 총 30명의 BP 후보에게 투표할 수 있으며 자신의 가지고 있는 투표권만큼 균등하게 비례하여 투표한다.

투표 또한 [`cleos`](../c/cleos.md) 를 이용하면 된다.

```text
cleos system voteproducer prods voter bpaccount bpacount2 bpaccount3
```

`cleos system voteproducer prods` : BP 후보에게 투표를 하기 위한 CLI 명령

`voter` : 투표권을 행사하고자 하는 계정 이름

`bpaccount` : 투표할 BP 후보 계정 이름

`bpaccount2` : 투표할 BP 후보 계정 이름

`bpaccount3` : 투표할 BP 후보 계정 이름

투표할 BP 후보 계정 이름 리스트는 최대 30명까지 투표할 수 있다.

### 3. 총 투표수가 일정수에 도달하면 BP가 자동 갱신된다.

[nodeos/config.ini](../n/nodeos-config.ini.md) 파일을 열어서 수정이 필요하다.

```text
producer-name = bpaccount
signature-provider = EOS6MRyAjQq8ud7hVNYcfnVPJqcVpscN5So8BhtHuGYqET5GDW5CV=KEY:5KQwrPbwdL6PhXujxW37FSSQZ1JiwsST4cqQzDeyXtP79zkvFD3
```

`producer-name` : BP 후보를 등록했던 자신의 BP 계정 이름을 입력해야 한다.

`signature-provider` : BP 후보 등록할때 사용했던 key 쌍을 입력한다.

현재 이오스의 경우 최소 150,000,000.0000 이상의 토큰만큼 스테이크 되어 투표를 해야 갱신된다.  1억5천만개의 투표가 정상적으로 완료 되었다면 네트워크 상황에 따라 틀리지만 대체적으로 1분 이내 자동으로 갱신된다.



